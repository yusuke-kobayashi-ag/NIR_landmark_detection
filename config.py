"""設定モジュール"""

import numpy as np


class Config:
    """処理の設定クラス"""
    
    LEARNED_MODEL_PATH = "./shape_predictor_68_face_landmarks.dat"
    OUTPUT_BASE_DIR = 'processed_data'  # 出力データのベースディレクトリ
    
    # 検出モード設定
    DETECTION_MODE = 'normal'  # 'normal' または 'high'
    
    # テンプレートランドマーク（検出失敗時用）
    TEMPLATE_LANDMARKS = np.array([
        [654, 712], [656, 752], [665, 793], [678, 832], [692, 866], [711, 899],  # 左目
        [820, 944], [845, 919], [866, 888],  # 右目
        [664, 686], [678, 669], [702, 663], [728, 666], [752, 677],  # 左眉毛
        [819, 670], [844, 656], [870, 651], [894, 656], [908, 675],  # 右眉毛
        [784, 718], [783, 756], [781, 793], [780, 829], [751, 836], [766, 842], [782, 848], [800, 841], [816, 834],  # 鼻
        [694, 721], [710, 714], [729, 715], [744, 727], [728, 730], [708, 730],  # 左目の詳細
        [829, 722], [845, 709], [864, 705], [879, 712], [867, 722], [847, 724],  # 右目の詳細
        [742, 884], [756, 882], [769, 879], [783, 884], [798, 879], [814, 880], [832, 881],  # 口の外側
        [815, 897], [799, 906], [784, 908], [770, 906], [756, 899],  # 口の内側（上）
        [749, 885], [769, 889], [783, 891], [798, 889], [825, 883],  # 口の内側（下）
        [798, 890], [784, 891], [770, 889],  # 口の内側（中央）
        [884, 856], [899, 822], [913, 783], [921, 743], [924, 702],  # 顔の輪郭（右）
        [654, 712], [656, 752], [665, 793], [678, 832], [692, 866], [711, 899],  # 顔の輪郭（左）
    ], dtype=np.int32)
    
    # NIR画像用の前処理パラメータ
    IMAGE_PROCESSING = {
        'normalize': True,
        'contrast_clip': 2.0,  # コントラストを上げる
        'detector_scale': 1.05,
        'detector_neighbors': 3,
        'gamma': 0.5,  # ガンマ値を調整
        'bilateral_d': 5,
        'bilateral_sigma_color': 15,  # ノイズ除去を強く
        'bilateral_sigma_space': 15,
        'alpha': 1.02,  # コントラストを上げる
        'beta': 5,  # 明るさを上げる
    }
